# 如何使用

## 一些关键的设置
### 模拟器设置
- 分辨率: 我们极力推荐你使用**1280x720**尺寸

### 游戏内设置
- 记忆大厅：请勿选取亚子，爱露, 若藻等角色, 推荐**关闭记忆大厅**
- 国际服语言：**英文**
- 游戏内设置

| 名称       | 选项      |
|----------|---------|
| 分辨率      | 60      |
| 加速渲染模式   | 兼容      |
| 后期处理     | ON      |
| 抗锯齿      | ON      |
 | 战斗画面上下黑边 | **OFF** |

## 脚本参数填写帮助

### 主线剧情
- 自动推剧情可以完成所有**走格子** 但是最终章一些战斗无法自动打
- 数字与章节对应表:

| 数字 | 对应章节     |
|----|----------|
| 1  | 序章（仅日服有） |
| 2  | 第一章      |
| 3  | 第二章      |
| 4  | 第三章      |
| 5  | 第四章      |
| 6  | 最终章      |
| 7  | 第五章      |
| 8  | EX章节     |

填写:
用","隔开数字表示依次要推的章节

- **example:**

| 填写参数  | BAAS执行         |
|-------|----------------|
| 1,3,6 | 依次推第一章，第三章，最终章 |
- **note:** 什么都不填会用默认配置

| 服务器 | 默认配置     |
|----|----------|
| 国服  | 2,3,4,5,6 |
| 国际服  | 2,3,4,5,6,7      |
| 日服  | 1,2,3,4,5,6,7,8） |

### 普通图自动推图
- 使用说明:
1. 必须解锁自动结束回合和自动战斗
2. 支持的关卡: 区域4 至 最新区域
3. 每次游戏更新新区域时**BAAS**会在当天更新最新区域的自动推图
4. BAAS推图时队伍移动点击坐标和路线是固定的，且所有移动只会点击一次，由于碧蓝档案游戏推图时若有多支队伍，则会根据队伍在游戏内编号大小坐标和移动次序不同。
5. 由于4，自动推图时必须保证选择队的伍编号由小到大 。
6. [**小春版配队指南**](#小春版配队指南)
7. BAAS会根据**普通图推图设置**中[队伍属性配置](/develop_doc/script/config#burst1-burst2-pierce1-pierce2-mystic1-mystic2-shock1-shock2)和[选队逻辑](#选队逻辑)寻找合适配置进行推图

#### 选队逻辑:
则根据以下逻辑选择队伍
1. 由使用说明4, 5可知，选出队伍编号由小到大
2. 优先保证打BOSS队伍的克制关系基础上选择剩余队伍编号, 逐渐降低剩余对应队伍属性克制关系。
3. 选择一个队伍时 （4 - 该队伍编号）>= 剩余需要队伍数量。
4. 若无法保证1和2，逐渐降低打BOSS对应队伍的属性。
5. 如果已选出某些队伍,且 4 - 这些队伍中最大编号 >= 剩余需要队伍数量，则剩余队伍由可选编号依次填充。
6. 上述条件均不满足，则以1, 2, 3... 为选择的队伍编号

例:

为 23图 ```[ 爆发 , 贯穿 ]``` 选择队伍时 尝试顺序

| 次数    | 一队    | 二队    |
|-------|-------|-------|
| 1     | 爆发一队  | 贯穿一队  |
| 2     | 爆发一队  | 贯穿二队  |
| 3     | 爆发一队  | 爆发二队  |
| 4     | 爆发一队  | 神秘一队  |
| 5     | 爆发一队  | 神秘二队  |
| 6     | 爆发二队  | 贯穿一队  |
| . . . | . . . | . . . |

假设你的配置

| 队伍    | 编号    |
|-------|-------|
| 爆发一队  | 3     |
| 爆发一队  | 4     |
| 贯穿一队  | 1     |
| 贯穿二队  | 4     |
| 神秘一堆  | 1     |
| 神秘二队  | 2     |
| . . . | . . . |

则会尝试

| 次数         | 一队 | 二队 |
|------------|----|----|
| 1 (不符合逻辑1) | 3  | 1  | 
| 2          | 3  | 4  |

最终选择队伍 3, 4

**note:** 此配队方案较为复杂, 后续可能会优化
#### 小春版配队指南
1. 将[队伍属性配置](/develop_doc/script/config#burst1-burst2-pierce1-pierce2-mystic1-mystic2-shock1-shock2)全部设置为1
2. 则BAAS会根据所需队伍数量依次选择队伍1, 2, 3 ... 此时只需将游戏内队伍设置成对应属性

### 普通图推图关卡填写说明
**note:** 当一个区域有支线关卡需要打时, 请**关闭强制打每一个关卡**
1. 未启用强制打每一个指定关卡
   - 填写的每一个数字表示要推图的区域，程序会根据当前关卡是否sss判断该区域每一关是否要打
   - 例：
    
   | 填写       | BAAS          |
    |----------|---------------|
    | 15,16,14 | 依次推15，16，14图。 |

2. 启用强制打每一个指定关卡
   - 输入一个数字表示推该区域所有关卡一次, 输入 数字-数字表示指定关卡
   - 例：

   | 填写      | BAAS                             |
   |---------|----------------------------------|
   | 15,16-3 | 依次打15-1,15-2,15-3,15-4,15-5,16-3 |

### 普通图扫荡填写说明
1. 每条扫荡配置形如 ```region```-```task number```-```sweep times```

    | 名称          | 含义   | 限制      |
    |-------------|------|---------|
    | region      | 区域   | 4-最新章节  |
    | task number | 关卡   | 1-5     |
    | sweep times | 扫荡次数 | 正整数/max |

2. 每条配置都用```","``` 隔开
3. 可用扫荡关卡:
教程-1与5图后 所有地图
4. 特殊说明
- ```sweep times``` 可以为 ```max```
- 教程需要```region```为固定字符串```tutorial```
- BAAS会根据当前体力和关卡体力计算当前关卡能否扫荡，不足或扫荡完次数为```max```的关卡会直接退出

例:

| 填写                            | BAAS                                  |
|-------------------------------|---------------------------------------|
| tutorial-1-20,15-3-3,20-3-max | 先打教程-1 20次,然后扫荡15-3,3次,然后使用所有体力扫荡20-3 |

### 活动图扫荡填写说明
1. 每条扫荡配置形如 ```task number```-```sweep times```

   | 名称          | 含义   | 限制        |
   |-------------|------|-----------|
   | task number | 关卡   | 1-12      |
   | sweep times | 扫荡次数 | 正整数/分数/小数 |
2. 扫荡次数: 
- 正整数 表示扫荡次数
- 小数 0.5 表示使用当前 体力*0.5 的 体力扫荡该关卡
- 分数 1/3 表示使用当前体力的1/3扫荡该关卡

例:

- 设体力: 999

| 扫荡关卡    | 扫荡次数      | BAAS                       |
|---------|-----------|----------------------------|
| 9,10,11 | 0.5,3,1/3 | 扫荡第9关25次, 第10关3次, 第11关16次  |

计算:
- (999 * 0.5) / 20 = 25次
- (999 * 1/3）/ 20 = 16次

**note:** BA通常活动关扫荡一次体力消耗:

| 关卡     | 体力消耗 |
|--------|------|
| 1 - 4  | 10   |
| 5 - 8  | 15   |
| 9 - 12 | 20   |

### 调度配置
1. 优先级:当有多于两个任务在队列中时，会优先做优先级小的任务
2. 执行间隔:整数 0 表示间隔一天，
3. 每日重置:
    - 每天固定在这些时间做对应任务(可以有多个时间戳，```","```隔开)
    填写格式 ```[[h, m, s]]``` （UTC时间）
    例：
   
      | 每日重置                          | BAAS                      |
      |-------------------------------|---------------------------|
      | ```[[0, 0, 0], [20, 0, 0]]``` | 北京时间(UTC + 8)8点,4点固定执行该任务 |

4. 禁用时间段:
   - 在所有禁用时间段不做该任务 （可以有多个时间段,```","```隔开）
    填写格式  ```[[[h1, m1, s1], [h2, m2, s1]]]``` (UTC时间)
    例：   
   
    | 每日重置                            | BAAS   |
    |---------------------------------|--------|
    | ```[[[0, 0, 0], [24, 0, 0]]]``` | 表示全天不做 |

5. 前置任务
    - 在执行该任务前依次执行前置任务里所有任务, 不会递归执行前置任务的前置任务
6. 后置任务
    - 在执行该任务后依次执行后置任务里所有任务

### 推送设置
- **serverchan：填写ServerChan提供的SendKey**
- **json：填写自定义的完整地址（如```http://127.0.0.1:8081/```）**
- **推送的json格式为:**
  ```{"title":"Baas Error","desp":"error..."}```