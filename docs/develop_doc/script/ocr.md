# 文字识别(OCR)

## OCR 将会使用C++重构, 作为项BAAS的子进程提供服务, 提供以下api
## **基础信息**
| 项目       | 说明               |
|----------|------------------|
| **地址**   | `localhost:1145` |
## 初始化模型

#### **请求信息**
| 方法  | URL           |
|------|---------------|
| `POST` | `/init_model` |

#### **请求头**
| 参数             | 说明                      | 示例值                    |
|----------------|-------------------------|-------------------------|
| `Content-Type` | 指定请求的数据格式       | `application/json`      |

#### **请求体**
| 参数          | 类型             | 必填 | 说明     |
|-------------|----------------|----|--------|
| `language`  | `string`       | 是  | 语言     |
| `flagGpu`   | `int`          | 否  | gpu id |
| `numThread` | `unsigned int` | 否  | 推理线程数  |


#### **响应体**
| 类型          | 说明                            |
|-------------|-------------------------------|
| `List[int]` | `最后一个int表示初始化时间, 前面每个数字含义如下表` |

| 值   | 含义        |
|-----|-----------|
| `0` | 不存在的语言    |
| `1` | `success` |
| `2` | 已经初始化过    |

### 释放模型

#### **请求信息**
| 方法     | URL              |
|--------|------------------|
| `POST` | `/release_model` |

#### **请求头**
| 参数             | 说明        | 示例值                |
|----------------|-----------|--------------------|
| `Content-Type` | 指定请求的数据格式 | `application/json` |

#### **请求体**
| 参数         | 类型          | 必填 | 说明       |
|------------|-------------|----|----------|
| `language` | `List[str]` | 是  | 语言       |

**note**: onnxruntime C++ 库存在内存泄露问题, 所以请勿频繁 加载 / 释放 模型

#### **响应体**
| 类型           | 说明                            |
|--------------|-------------------------------|
| `List[bool]` | `最后一个int表示初始化时间, 前面每个数字含义如下表` |

| 值       | 含义        |
|---------|-----------|
| `false` | 不存在的语言    |
| `true`  | `success` |

### 释放所有模型

#### **请求信息**
| 方法    | URL            |
|-------|----------------|
| `Get` | `/release_all` |


### 获取图像的文字框

#### **请求信息**
| 方法     | URL             |
|--------|-----------------|
| `POST` | `/get_text_box` |

#### **请求头**
| 参数             | 说明                      | 示例值                    |
|----------------|-------------------------|-------------------------|
| `Content-Type` | 指定请求的数据格式       | `application/json`      |

#### **请求体**
| 参数                           | 类型             | 必填 | 说明           |
|------------------------------|----------------|----|--------------|
| `/image/pass_method`         | `unsigned int` | 是  | 图像传递方式       |
| `/image/local_path`          | `string`       | 否  | 图像本地路径       |
| `/imgage/shared_memory_name` | `string`       | 否  | 图像数据所在的共享内存名 |


